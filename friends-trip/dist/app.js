(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{7:function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nvar config = {\n  httpUrl: "//pg-api.azurewebsites.net/api/",\n  //httpUrl: \'http://localhost:5000/api/\',\n\n  routes: {\n    Login: "login.html",\n    Transactions: "index.html",\n    Report: "report.html"\n  }\n};\n\nvar app = {\n  EmptyRoom: {\n    Id: "",\n    Name: ""\n  },\n\n  context: {\n    Settings: {\n      filterByUserId: ""\n    },\n    CurrentUser: null,\n    CurrentRoom: null,\n    Table: []\n  },\n\n  LS: {\n    Keys: {\n      SETTINGS: "current-settings",\n      USER: "current-user",\n      ROOM: "current-room"\n    },\n    get: function get(key) {\n      var valueRaw = window.localStorage.getItem(key);\n      var value = JSON.parse(valueRaw);\n      return value || null;\n    },\n    set: function set(key, value) {\n      var valueRaw = JSON.stringify(value);\n      window.localStorage.setItem(key, valueRaw);\n    }\n  },\n\n  init: function init(_ref) {\n    var onError = _ref.onError,\n        onLoading = _ref.onLoading;\n\n    this.onError = function (data) {\n      console.log(data);\n      onError(data);\n    };\n    this.onLoading = onLoading;\n\n    app.initContext();\n    app.checkAuth(app.context.CurrentUser);\n  },\n  ajax: function ajax(actionUrl) {\n    var _this = this;\n\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "POST";\n\n    var authKey = app.context.CurrentUser == null ? null : app.context.CurrentUser.AuthToken;\n\n    var ajaxUrl = config.httpUrl + actionUrl;\n    var body = JSON.stringify(data);\n\n    app.onLoading(true);\n\n    return fetch(ajaxUrl, {\n      method: method,\n      body: body,\n      headers: {\n        authToken: authKey,\n        "Content-Type": "application/json"\n      },\n      mode: "cors",\n      cache: "no-cache"\n    }).then(function (response) {\n      if (response.ok) {\n        return response.json();\n      }\n      throw response;\n    }).catch(function (data) {\n      console.log("fetch err", data);\n      if (data.status === 401) {\n        _this.logout();\n      }\n      app.onError(data);\n    }).finally(function () {\n      return app.onLoading(false);\n    });\n  },\n  logout: function logout() {\n    app.LS.set(app.LS.Keys.USER, null);\n    app.checkAuth(null);\n  },\n  checkAuth: function checkAuth(user) {\n    var curPage = location.pathname.toLowerCase();\n    curPage = curPage.substring(curPage.lastIndexOf("/") + 1);\n\n    if (user && curPage == config.routes.Login) location.href = config.routes.Transactions;else if (!user && curPage != config.routes.Login) location.href = config.routes.Login;\n  },\n  initContext: function initContext() {\n    var settings = app.LS.get(app.LS.Keys.SETTINGS);\n    if (settings != null) app.context.Settings = settings;\n\n    var user = app.LS.get(app.LS.Keys.USER);\n    app.context.CurrentUser = user;\n    var room = app.LS.get(app.LS.Keys.ROOM);\n    if (room == null) app.context.CurrentRoom = app.EmptyRoom;else app.context.CurrentRoom = room;\n  },\n  saveSettings: function saveSettings() {\n    app.LS.set(app.LS.Keys.SETTINGS, app.context.Settings);\n  },\n  onLoginDone: function onLoginDone(data) {\n    var user = data.data;\n\n    app.LS.set(app.LS.Keys.USER, user);\n    app.checkAuth(user);\n    //location.href = config.routes.Transactions;\n  },\n  login: function login(username, password) {\n    app.ajax("auth/login", { username: username, password: password }).then(app.onLoginDone);\n  },\n  register: function register(username, password) {\n    app.ajax("auth/register", { username: username, password: password }).then(app.onLoginDone);\n  },\n  loadCurrentRoom: function loadCurrentRoom() {\n    return app.ajax("room/status").then(function (result) {\n      var room = result.data;\n      app.LS.set(app.LS.Keys.ROOM, room);\n    });\n  }\n};\n\nexports.default = app;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvYXBwLmpzPzkwZTkiXSwibmFtZXMiOlsiY29uZmlnIiwiaHR0cFVybCIsInJvdXRlcyIsIkxvZ2luIiwiVHJhbnNhY3Rpb25zIiwiUmVwb3J0IiwiYXBwIiwiRW1wdHlSb29tIiwiSWQiLCJOYW1lIiwiY29udGV4dCIsIlNldHRpbmdzIiwiZmlsdGVyQnlVc2VySWQiLCJDdXJyZW50VXNlciIsIkN1cnJlbnRSb29tIiwiVGFibGUiLCJMUyIsIktleXMiLCJTRVRUSU5HUyIsIlVTRVIiLCJST09NIiwiZ2V0IiwidmFsdWVSYXciLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwia2V5IiwidmFsdWUiLCJKU09OIiwicGFyc2UiLCJzZXQiLCJzdHJpbmdpZnkiLCJzZXRJdGVtIiwiaW5pdCIsIm9uRXJyb3IiLCJvbkxvYWRpbmciLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsImluaXRDb250ZXh0IiwiY2hlY2tBdXRoIiwiYWpheCIsImFjdGlvblVybCIsIm1ldGhvZCIsImF1dGhLZXkiLCJBdXRoVG9rZW4iLCJhamF4VXJsIiwiYm9keSIsImZldGNoIiwiaGVhZGVycyIsImF1dGhUb2tlbiIsIm1vZGUiLCJjYWNoZSIsInRoZW4iLCJyZXNwb25zZSIsIm9rIiwianNvbiIsImNhdGNoIiwic3RhdHVzIiwibG9nb3V0IiwiZmluYWxseSIsInVzZXIiLCJjdXJQYWdlIiwibG9jYXRpb24iLCJwYXRobmFtZSIsInRvTG93ZXJDYXNlIiwic3Vic3RyaW5nIiwibGFzdEluZGV4T2YiLCJocmVmIiwic2V0dGluZ3MiLCJyb29tIiwic2F2ZVNldHRpbmdzIiwib25Mb2dpbkRvbmUiLCJsb2dpbiIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJyZWdpc3RlciIsImxvYWRDdXJyZW50Um9vbSIsInJlc3VsdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxJQUFNQSxTQUFTO0FBQ2JDLFdBQVMsaUNBREk7QUFFYjs7QUFFQUMsVUFB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QTdCO0FBQ0QsS0FITSxDQUFQO0FBSUQ7QUFuSVMsQ0FBWjs7a0JBc0llaEUsRyIsImZpbGUiOiI3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY29uZmlnID0ge1xuICBodHRwVXJsOiBcIi8vcGctYXBpLmF6dXJld2Vic2l0ZXMubmV0L2FwaS9cIixcbiAgLy9odHRwVXJsOiAnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2FwaS8nLFxuXG4gIHJvdXRlczoge1xuICAgIExvZ2luOiBcImxvZ2luLmh0bWxcIixcbiAgICBUcmFuc2FjdGlvbnM6IFwiaW5kZXguaHRtbFwiLFxuICAgIFJlcG9ydDogXCJyZXBvcnQuaHRtbFwiXG4gIH1cbn07XG5cbmNvbnN0IGFwcCA9IHtcbiAgRW1wdHlSb29tOiB7XG4gICAgSWQ6IFwiXCIsXG4gICAgTmFtZTogXCJcIlxuICB9LFxuXG4gIGNvbnRleHQ6IHtcbiAgICBTZXR0aW5nczoge1xuICAgICAgZmlsdGVyQnlVc2VySWQ6IFwiXCJcbiAgICB9LFxuICAgIEN1cnJlbnRVc2VyOiBudWxsLFxuICAgIEN1cnJlbnRSb29tOiBudWxsLFxuICAgIFRhYmxlOiBbXVxuICB9LFxuXG4gIExTOiB7XG4gICAgS2V5czoge1xuICAgICAgU0VUVElOR1M6IFwiY3VycmVudC1zZXR0aW5nc1wiLFxuICAgICAgVVNFUjogXCJjdXJyZW50LXVzZXJcIixcbiAgICAgIFJPT006IFwiY3VycmVudC1yb29tXCJcbiAgICB9LFxuICAgIGdldDoga2V5ID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlUmF3ID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICB2YXIgdmFsdWUgPSBKU09OLnBhcnNlKHZhbHVlUmF3KTtcbiAgICAgIHJldHVybiB2YWx1ZSB8fCBudWxsO1xuICAgIH0sXG4gICAgc2V0OiAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgY29uc3QgdmFsdWVSYXcgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZVJhdyk7XG4gICAgfVxuICB9LFxuXG4gIGluaXQoeyBvbkVycm9yLCBvbkxvYWRpbmcgfSkge1xuICAgIHRoaXMub25FcnJvciA9IGRhdGEgPT4ge1xuICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICBvbkVycm9yKGRhdGEpO1xuICAgIH07XG4gICAgdGhpcy5vbkxvYWRpbmcgPSBvbkxvYWRpbmc7XG5cbiAgICBhcHAuaW5pdENvbnRleHQoKTtcbiAgICBhcHAuY2hlY2tBdXRoKGFwcC5jb250ZXh0LkN1cnJlbnRVc2VyKTtcbiAgfSxcblxuICBhamF4KGFjdGlvblVybCwgZGF0YSA9IHt9LCBtZXRob2QgPSBcIlBPU1RcIikge1xuICAgIGNvbnN0IGF1dGhLZXkgPVxuICAgICAgYXBwLmNvbnRleHQuQ3VycmVudFVzZXIgPT0gbnVsbFxuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBhcHAuY29udGV4dC5DdXJyZW50VXNlci5BdXRoVG9rZW47XG5cbiAgICBjb25zdCBhamF4VXJsID0gY29uZmlnLmh0dHBVcmwgKyBhY3Rpb25Vcmw7XG4gICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuXG4gICAgYXBwLm9uTG9hZGluZyh0cnVlKTtcblxuICAgIHJldHVybiBmZXRjaChhamF4VXJsLCB7XG4gICAgICBtZXRob2QsXG4gICAgICBib2R5LFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRoVG9rZW46IGF1dGhLZXksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICB9LFxuICAgICAgbW9kZTogXCJjb3JzXCIsXG4gICAgICBjYWNoZTogXCJuby1jYWNoZVwiXG4gICAgfSlcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyByZXNwb25zZTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZGF0YSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZmV0Y2ggZXJyXCIsIGRhdGEpO1xuICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgIHRoaXMubG9nb3V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgYXBwLm9uRXJyb3IoZGF0YSk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4gYXBwLm9uTG9hZGluZyhmYWxzZSkpO1xuICB9LFxuXG4gIGxvZ291dCgpIHtcbiAgICBhcHAuTFMuc2V0KGFwcC5MUy5LZXlzLlVTRVIsIG51bGwpO1xuICAgIGFwcC5jaGVja0F1dGgobnVsbCk7XG4gIH0sXG5cbiAgY2hlY2tBdXRoKHVzZXIpIHtcbiAgICB2YXIgY3VyUGFnZSA9IGxvY2F0aW9uLnBhdGhuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgY3VyUGFnZSA9IGN1clBhZ2Uuc3Vic3RyaW5nKGN1clBhZ2UubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG5cbiAgICBpZiAodXNlciAmJiBjdXJQYWdlID09IGNvbmZpZy5yb3V0ZXMuTG9naW4pXG4gICAgICBsb2NhdGlvbi5ocmVmID0gY29uZmlnLnJvdXRlcy5UcmFuc2FjdGlvbnM7XG4gICAgZWxzZSBpZiAoIXVzZXIgJiYgY3VyUGFnZSAhPSBjb25maWcucm91dGVzLkxvZ2luKVxuICAgICAgbG9jYXRpb24uaHJlZiA9IGNvbmZpZy5yb3V0ZXMuTG9naW47XG4gIH0sXG5cbiAgaW5pdENvbnRleHQoKSB7XG4gICAgdmFyIHNldHRpbmdzID0gYXBwLkxTLmdldChhcHAuTFMuS2V5cy5TRVRUSU5HUyk7XG4gICAgaWYgKHNldHRpbmdzICE9IG51bGwpIGFwcC5jb250ZXh0LlNldHRpbmdzID0gc2V0dGluZ3M7XG5cbiAgICB2YXIgdXNlciA9IGFwcC5MUy5nZXQoYXBwLkxTLktleXMuVVNFUik7XG4gICAgYXBwLmNvbnRleHQuQ3VycmVudFVzZXIgPSB1c2VyO1xuICAgIHZhciByb29tID0gYXBwLkxTLmdldChhcHAuTFMuS2V5cy5ST09NKTtcbiAgICBpZiAocm9vbSA9PSBudWxsKSBhcHAuY29udGV4dC5DdXJyZW50Um9vbSA9IGFwcC5FbXB0eVJvb207XG4gICAgZWxzZSBhcHAuY29udGV4dC5DdXJyZW50Um9vbSA9IHJvb207XG4gIH0sXG5cbiAgc2F2ZVNldHRpbmdzKCkge1xuICAgIGFwcC5MUy5zZXQoYXBwLkxTLktleXMuU0VUVElOR1MsIGFwcC5jb250ZXh0LlNldHRpbmdzKTtcbiAgfSxcblxuICBvbkxvZ2luRG9uZShkYXRhKSB7XG4gICAgdmFyIHVzZXIgPSBkYXRhLmRhdGE7XG5cbiAgICBhcHAuTFMuc2V0KGFwcC5MUy5LZXlzLlVTRVIsIHVzZXIpO1xuICAgIGFwcC5jaGVja0F1dGgodXNlcik7XG4gICAgLy9sb2NhdGlvbi5ocmVmID0gY29uZmlnLnJvdXRlcy5UcmFuc2FjdGlvbnM7XG4gIH0sXG5cbiAgbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgYXBwLmFqYXgoXCJhdXRoL2xvZ2luXCIsIHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0pLnRoZW4oYXBwLm9uTG9naW5Eb25lKTtcbiAgfSxcblxuICByZWdpc3Rlcih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICBhcHAuYWpheChcImF1dGgvcmVnaXN0ZXJcIiwgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSkudGhlbihhcHAub25Mb2dpbkRvbmUpO1xuICB9LFxuXG4gIGxvYWRDdXJyZW50Um9vbSgpIHtcbiAgICByZXR1cm4gYXBwLmFqYXgoXCJyb29tL3N0YXR1c1wiKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICBjb25zdCByb29tID0gcmVzdWx0LmRhdGE7XG4gICAgICBhcHAuTFMuc2V0KGFwcC5MUy5LZXlzLlJPT00sIHJvb20pO1xuICAgIH0pO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhcHA7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7\n')}},[[7,0]]]);