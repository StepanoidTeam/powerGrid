(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{7:function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.GIT = undefined;\n\nvar _store = __webpack_require__(8);\n\nvar _store2 = _interopRequireDefault(_store);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar config = {\n  httpUrl: "//pg-api.azurewebsites.net/api/",\n  //httpUrl: \'http://localhost:5000/api/\',\n\n  routes: {\n    Login: "login.html",\n    Transactions: "index.html",\n    Report: "report.html"\n  }\n};\n\nvar GIT = exports.GIT = {\n  //API\n  push: function push() {\n    //send new to server\n  },\n  pull: function pull() {\n    //get all from server\n  },\n  merge: function merge(oldValues, newValues) {\n    //merge local + server\n\n    // total replace for now\n    return oldValues.splice.apply(oldValues, [0, oldValues.length + 1].concat(_toConsumableArray(newValues)));\n  }\n};\n\nvar app = {\n  //todo: remove this\n  context: {},\n\n  init: function init() {\n    //todo: remove context prosloyka\n    app.context.CurrentUser = new _store2.default("current-user", {});\n    app.context.CurrentRoom = new _store2.default("current-room", {\n      Id: "",\n      Name: ""\n    });\n    app.context.Settings = new _store2.default("current-settings", {\n      filterBy: null\n    });\n\n    app.checkAuth();\n    //todo: if empty room - redir to login?\n    var prefix = app.context.CurrentRoom.Id;\n    app.context.Table = new _store2.default(prefix + ":transactions", []);\n  },\n  isLogged: function isLogged() {\n    return !!app.context.CurrentUser.Id;\n  },\n  logger: function logger(data) {\n    console.log(data);\n    return data;\n  },\n  ajax: function ajax(actionUrl) {\n    var _this = this;\n\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "POST";\n\n    var authKey = app.context.CurrentUser.AuthToken || null;\n\n    var ajaxUrl = config.httpUrl + actionUrl;\n    var body = JSON.stringify(data);\n\n    return fetch(ajaxUrl, {\n      method: method,\n      body: body,\n      headers: {\n        authToken: authKey,\n        "Content-Type": "application/json"\n      },\n      mode: "cors",\n      cache: "no-cache"\n    }).then(function (response) {\n      if (response.ok) {\n        return response.json();\n      }\n      throw response;\n    }).then(function (response) {\n      return response.data;\n    }).then(app.logger).catch(function (response) {\n      console.log("fetch err", response);\n\n      //todo: check if actual\n      if (response.status === 401) {\n        _this.logout();\n      }\n\n      return response.json().then(function (errorModel) {\n        console.log("errorModel", errorModel);\n        throw errorModel;\n      });\n    });\n  },\n  checkAuth: function checkAuth() {\n    var curPage = location.pathname.toLowerCase();\n    curPage = curPage.substring(curPage.lastIndexOf("/") + 1);\n\n    //ROUTING\n    if (app.isLogged() && curPage === config.routes.Login) {\n      location.href = config.routes.Transactions;\n    } else if (!app.isLogged() && curPage !== config.routes.Login) {\n      location.href = config.routes.Login;\n    }\n  },\n  onLoginDone: function onLoginDone(user) {\n    Object.assign(app.context.CurrentUser, user);\n    //do we need to?\n    app.checkAuth();\n  },\n\n\n  //sync mapper\n  extractPullItems: function extractPullItems(response) {\n    return response.data.pullResult.transactions;\n  },\n\n\n  //auth mapper\n  extractUser: function extractUser(response) {\n    return response.data;\n  },\n  sync: function sync(data) {\n    return app.ajax("trans/sync", data);\n  },\n  logout: function logout() {\n    (0, _store.clearStore)(app.context.CurrentUser);\n\n    app.checkAuth();\n  },\n  login: function login(user) {\n    return app.ajax("auth/login", user).then(app.onLoginDone);\n  },\n  register: function register(user) {\n    return app.ajax("auth/register", user).then(app.onLoginDone);\n  },\n  loadCurrentRoom: function loadCurrentRoom() {\n    return app.ajax("room/status").then(function (room) {\n      Object.assign(app.context.CurrentRoom, room);\n    });\n  }\n};\n\nexports.default = app;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvYXBwLmpzPzkwZTkiXSwibmFtZXMiOlsiY29uZmlnIiwiaHR0cFVybCIsInJvdXRlcyIsIkxvZ2luIiwiVHJhbnNhY3Rpb25zIiwiUmVwb3J0IiwiR0lUIiwicHVzaCIsInB1bGwiLCJtZXJnZSIsIm9sZFZhbHVlcyIsIm5ld1ZhbHVlcyIsInNwbGljZSIsImxlbmd0aCIsImFwcCIsImNvbnRleHQiLCJpbml0IiwiQ3VycmVudFVzZXIiLCJTdG9yZSIsIkN1cnJlbnRSb29tIiwiSWQiLCJOYW1lIiwiU2V0dGluZ3MiLCJmaWx0ZXJCeSIsImNoZWNrQXV0aCIsInByZWZpeCIsIlRhYmxlIiwiaXNMb2dnZWQiLCJsb2dnZXIiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsImFqYXgiLCJhY3Rpb25VcmwiLCJtZXRob2QiLCJhdXRoS2V5IiwiQXV0aFRva2VuIiwiYWpheFVybCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aFRva2VuIiwibW9kZSIsImNhY2hlIiwidGhlbiIsInJlc3BvbnNlIiwib2siLCJqc29uIiwiY2F0Y2giLCJzdGF0dXMiLCJsb2dvdXQiLCJlcnJvck1vZGVsIiwiY3VyUGFnZSIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJ0b0xvd2VyQ2FzZSIsInN1YnN0cmluZyIsImxhc3RJbmRleE9mIiwiaHJlZiIsIm9uTG9naW5Eb25lIiwidXNlciIsIk9iamVjdCIsImFzc2lnbiIsImV4dHJhY3RQdWxsSXRlbXMiLCJwdWxsUmVzdWx0IiwidHJhbnNhY3Rpb25zIiwiZXh0cmFjdFVzZXIiLCJzeW5jIiwibG9naW4iLCJyZWdpc3RlciIsImxvYWRDdXJyZW50Um9vbSIsInJvb20iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7Ozs7Ozs7QUFFQSxJQUFNQSxTQUFTO0FBQ2JDLFdBQVMsaUNBREk7QUFFYjs7QUFFQUMsVUFBUTtBQUNOQyxXQUFPLFlBREQ7QUFFTkMsa0JB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QUlVLFNBQUo7QUFDRCxHQXpHUztBQTJHVjhDLE9BM0dVLGlCQTJHSlIsSUEzR0ksRUEyR0U7QUFDVixXQUFPaEQsSUFBSWtCLElBQUosQ0FBUyxZQUFULEVBQXVCOEIsSUFBdkIsRUFBNkJoQixJQUE3QixDQUFrQ2hDLElBQUkrQyxXQUF0QyxDQUFQO0FBQ0QsR0E3R1M7QUErR1ZVLFVBL0dVLG9CQStHRFQsSUEvR0MsRUErR0s7QUFDYixXQUFPaEQsSUFBSWtCLElBQUosQ0FBUyxlQUFULEVBQTBCOEIsSUFBMUIsRUFBZ0NoQixJQUFoQyxDQUFxQ2hDLElBQUkrQyxXQUF6QyxDQUFQO0FBQ0QsR0FqSFM7QUFtSFZXLGlCQW5IVSw2QkFtSFE7QUFDaEIsV0FBTzFELElBQUlrQixJQUFKLENBQVMsYUFBVCxFQUF3QmMsSUFBeEIsQ0FBNkIsZ0JBQVE7QUFDMUNpQixhQUFPQyxNQUFQLENBQWNsRCxJQUFJQyxPQUFKLENBQVlJLFdBQTFCLEVBQXVDc0QsSUFBdkM7QUFDRCxLQUZNLENBQVA7QUFHRDtBQXZIUyxDQUFaOztrQkEwSGUzRCxHIiwiZmlsZSI6IjcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU3RvcmUsIHsgY2xlYXJTdG9yZSB9IGZyb20gXCIuL3N0b3JlXCI7XG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgaHR0cFVybDogXCIvL3BnLWFwaS5henVyZXdlYnNpdGVzLm5ldC9hcGkvXCIsXG4gIC8vaHR0cFVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hcGkvJyxcblxuICByb3V0ZXM6IHtcbiAgICBMb2dpbjogXCJsb2dpbi5odG1sXCIsXG4gICAgVHJhbnNhY3Rpb25zOiBcImluZGV4Lmh0bWxcIixcbiAgICBSZXBvcnQ6IFwicmVwb3J0Lmh0bWxcIlxuICB9XG59O1xuXG5leHBvcnQgY29uc3QgR0lUID0ge1xuICAvL0FQSVxuICBwdXNoKCkge1xuICAgIC8vc2VuZCBuZXcgdG8gc2VydmVyXG4gIH0sXG5cbiAgcHVsbCgpIHtcbiAgICAvL2dldCBhbGwgZnJvbSBzZXJ2ZXJcbiAgfSxcblxuICBtZXJnZShvbGRWYWx1ZXMsIG5ld1ZhbHVlcykge1xuICAgIC8vbWVyZ2UgbG9jYWwgKyBzZXJ2ZXJcblxuICAgIC8vIHRvdGFsIHJlcGxhY2UgZm9yIG5vd1xuICAgIHJldHVybiBvbGRWYWx1ZXMuc3BsaWNlKDAsIG9sZFZhbHVlcy5sZW5ndGggKyAxLCAuLi5uZXdWYWx1ZXMpO1xuICB9XG59O1xuXG5jb25zdCBhcHAgPSB7XG4gIC8vdG9kbzogcmVtb3ZlIHRoaXNcbiAgY29udGV4dDoge30sXG5cbiAgaW5pdCgpIHtcbiAgICAvL3RvZG86IHJlbW92ZSBjb250ZXh0IHByb3Nsb3lrYVxuICAgIGFwcC5jb250ZXh0LkN1cnJlbnRVc2VyID0gbmV3IFN0b3JlKGBjdXJyZW50LXVzZXJgLCB7fSk7XG4gICAgYXBwLmNvbnRleHQuQ3VycmVudFJvb20gPSBuZXcgU3RvcmUoYGN1cnJlbnQtcm9vbWAsIHtcbiAgICAgIElkOiBcIlwiLFxuICAgICAgTmFtZTogXCJcIlxuICAgIH0pO1xuICAgIGFwcC5jb250ZXh0LlNldHRpbmdzID0gbmV3IFN0b3JlKGBjdXJyZW50LXNldHRpbmdzYCwge1xuICAgICAgZmlsdGVyQnk6IG51bGxcbiAgICB9KTtcblxuICAgIGFwcC5jaGVja0F1dGgoKTtcbiAgICAvL3RvZG86IGlmIGVtcHR5IHJvb20gLSByZWRpciB0byBsb2dpbj9cbiAgICBjb25zdCBwcmVmaXggPSBhcHAuY29udGV4dC5DdXJyZW50Um9vbS5JZDtcbiAgICBhcHAuY29udGV4dC5UYWJsZSA9IG5ldyBTdG9yZShgJHtwcmVmaXh9OnRyYW5zYWN0aW9uc2AsIFtdKTtcbiAgfSxcblxuICBpc0xvZ2dlZCgpIHtcbiAgICByZXR1cm4gISFhcHAuY29udGV4dC5DdXJyZW50VXNlci5JZDtcbiAgfSxcblxuICBsb2dnZXIoZGF0YSkge1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIHJldHVybiBkYXRhO1xuICB9LFxuXG4gIGFqYXgoYWN0aW9uVXJsLCBkYXRhID0ge30sIG1ldGhvZCA9IFwiUE9TVFwiKSB7XG4gICAgY29uc3QgYXV0aEtleSA9IGFwcC5jb250ZXh0LkN1cnJlbnRVc2VyLkF1dGhUb2tlbiB8fCBudWxsO1xuXG4gICAgY29uc3QgYWpheFVybCA9IGNvbmZpZy5odHRwVXJsICsgYWN0aW9uVXJsO1xuICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcblxuICAgIHJldHVybiBmZXRjaChhamF4VXJsLCB7XG4gICAgICBtZXRob2QsXG4gICAgICBib2R5LFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRoVG9rZW46IGF1dGhLZXksXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICB9LFxuICAgICAgbW9kZTogXCJjb3JzXCIsXG4gICAgICBjYWNoZTogXCJuby1jYWNoZVwiXG4gICAgfSlcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyByZXNwb25zZTtcbiAgICAgIH0pXG4gICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5kYXRhKVxuICAgICAgLnRoZW4oYXBwLmxvZ2dlcilcbiAgICAgIC5jYXRjaChyZXNwb25zZSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZmV0Y2ggZXJyXCIsIHJlc3BvbnNlKTtcblxuICAgICAgICAvL3RvZG86IGNoZWNrIGlmIGFjdHVhbFxuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgICB0aGlzLmxvZ291dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKS50aGVuKGVycm9yTW9kZWwgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3JNb2RlbFwiLCBlcnJvck1vZGVsKTtcbiAgICAgICAgICB0aHJvdyBlcnJvck1vZGVsO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICB9LFxuXG4gIGNoZWNrQXV0aCgpIHtcbiAgICB2YXIgY3VyUGFnZSA9IGxvY2F0aW9uLnBhdGhuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgY3VyUGFnZSA9IGN1clBhZ2Uuc3Vic3RyaW5nKGN1clBhZ2UubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG5cbiAgICAvL1JPVVRJTkdcbiAgICBpZiAoYXBwLmlzTG9nZ2VkKCkgJiYgY3VyUGFnZSA9PT0gY29uZmlnLnJvdXRlcy5Mb2dpbikge1xuICAgICAgbG9jYXRpb24uaHJlZiA9IGNvbmZpZy5yb3V0ZXMuVHJhbnNhY3Rpb25zO1xuICAgIH0gZWxzZSBpZiAoIWFwcC5pc0xvZ2dlZCgpICYmIGN1clBhZ2UgIT09IGNvbmZpZy5yb3V0ZXMuTG9naW4pIHtcbiAgICAgIGxvY2F0aW9uLmhyZWYgPSBjb25maWcucm91dGVzLkxvZ2luO1xuICAgIH1cbiAgfSxcblxuICBvbkxvZ2luRG9uZSh1c2VyKSB7XG4gICAgT2JqZWN0LmFzc2lnbihhcHAuY29udGV4dC5DdXJyZW50VXNlciwgdXNlcik7XG4gICAgLy9kbyB3ZSBuZWVkIHRvP1xuICAgIGFwcC5jaGVja0F1dGgoKTtcbiAgfSxcblxuICAvL3N5bmMgbWFwcGVyXG4gIGV4dHJhY3RQdWxsSXRlbXMocmVzcG9uc2UpIHtcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5wdWxsUmVzdWx0LnRyYW5zYWN0aW9ucztcbiAgfSxcblxuICAvL2F1dGggbWFwcGVyXG4gIGV4dHJhY3RVc2VyKHJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gIH0sXG5cbiAgc3luYyhkYXRhKSB7XG4gICAgcmV0dXJuIGFwcC5hamF4KFwidHJhbnMvc3luY1wiLCBkYXRhKTtcbiAgfSxcblxuICBsb2dvdXQoKSB7XG4gICAgY2xlYXJTdG9yZShhcHAuY29udGV4dC5DdXJyZW50VXNlcik7XG5cbiAgICBhcHAuY2hlY2tBdXRoKCk7XG4gIH0sXG5cbiAgbG9naW4odXNlcikge1xuICAgIHJldHVybiBhcHAuYWpheChcImF1dGgvbG9naW5cIiwgdXNlcikudGhlbihhcHAub25Mb2dpbkRvbmUpO1xuICB9LFxuXG4gIHJlZ2lzdGVyKHVzZXIpIHtcbiAgICByZXR1cm4gYXBwLmFqYXgoXCJhdXRoL3JlZ2lzdGVyXCIsIHVzZXIpLnRoZW4oYXBwLm9uTG9naW5Eb25lKTtcbiAgfSxcblxuICBsb2FkQ3VycmVudFJvb20oKSB7XG4gICAgcmV0dXJuIGFwcC5hamF4KFwicm9vbS9zdGF0dXNcIikudGhlbihyb29tID0+IHtcbiAgICAgIE9iamVjdC5hc3NpZ24oYXBwLmNvbnRleHQuQ3VycmVudFJvb20sIHJvb20pO1xuICAgIH0pO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhcHA7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7\n')},8:function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.clearStore = clearStore;\n\nvar _debounce = __webpack_require__(11);\n\nvar _debounce2 = _interopRequireDefault(_debounce);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nvar Store = function Store(key, initialValue) {\n  _classCallCheck(this, Store);\n\n  _initialiseProps.call(this);\n\n  this.key = key;\n  var value = this.getItem(this.key) || initialValue;\n  return new Proxy(value, this.handler);\n};\n\n//todo: make as a part of store\n\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this = this;\n\n  this.save = (0, _debounce2.default)(function (value) {\n    _this.setItem(_this.key, value);\n  }, 0);\n  this.handler = {\n    get: function get(target, property) {\n      return target[property];\n    },\n    set: function set(target, property, value) {\n      target[property] = value;\n\n      _this.save(target);\n      return true;\n    }\n  };\n\n  this.getItem = function (key) {\n    var valueRaw = window.localStorage.getItem(key);\n    var value = JSON.parse(valueRaw);\n    return value || null;\n  };\n\n  this.setItem = function (key, value) {\n    var valueRaw = JSON.stringify(value);\n    window.localStorage.setItem(key, valueRaw);\n  };\n};\n\nexports.default = Store;\nfunction clearStore(target) {\n  Object.keys(target).forEach(function (key) {\n    delete target[key];\n  });\n  return target;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvc3RvcmUuanM/NmFiMSJdLCJuYW1lcyI6WyJjbGVhclN0b3JlIiwiU3RvcmUiLCJrZXkiLCJpbml0aWFsVmFsdWUiLCJ2YWx1ZSIsImdldEl0ZW0iLCJQcm94eSIsImhhbmRsZXIiLCJzYXZlIiwic2V0SXRlbSIsImdldCIsInRhcmdldCIsInByb3BlcnR5Iiwic2V0IiwidmFsdWVSYXciLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCJdLCJtYXBwaW5ncyI6Ijs7Ozs7UUFzQ2dCQSxVLEdBQUFBLFU7O0FBdENoQjs7Ozs7Ozs7SUFFcUJDLEssR0E0Qm5CLGVBQVlDLEdBQVosRUFBaUJDLFlBQWpCLEVBQStCO0FBQUE7O0FBQUE7O0FBQzdCLE9BQUtELEdBQUwsR0FBV0EsR0FBWDtBQUNBLE1BQU1FLFFBQVEsS0FBS0MsT0FBTCxDQUFhLEtBQUtILEdBQWxCLEtBQTBCQyxZQUF4QztBQUNBLFNBQU8sSUFBSUcsS0FBSixDQUFVRixLQUFWLEVBQWlCLEtBQUtHLE9BQXRCLENBQVA7QUFDRCxDOztBQUdIOzs7Ozs7T0FsQ0VDLEksR0FBTyx3QkFBUyxpQkFBUztBQUN2QixVQUFLQyxPQUFMLENBQWEsTUFBS1AsR0FBbEIsRUFBdUJFLEtBQXZCO0FBQ0QsR0FGTSxFQUVKLENBRkksQztPQUlQRyxPLEdBQVU7QUFDUkcsU0FBSyxhQUFDQyxNQUFELEVBQVNDLFFBQVQsRUFBc0I7QUFDekIsYUFBT0QsT0FBT0MsUUFBUCxDQUFQO0FBQ0QsS0FITztBQUlSQyxTQUFLLGFBQUNGLE1BQUQsRUFBU0MsUUFBVCxFQUFtQlIsS0FBbkIsRUFBNkI7QUFDaENPLGFBQU9DLFFBQVAsSUFBbUJSLEtBQW5COztBQUVBLFlBQUtJLElBQUwsQ0FBVUcsTUFBVjtBQUNBLGFBQU8sSUFBUDtBQUNEO0FBVE8sRzs7T0FZVk4sTyxHQUFVLGVBQU87QUFDZixRQUFNUyxXQUFXQyxPQUFPQyxZQUFQLENBQW9CWCxPQUFwQixDQUE0QkgsR0FBNUIsQ0FBakI7QUFDQSxRQUFJRSxRQUFRYSxLQUFLQyxLQUFMLENBQVdKLFFBQVgsQ0FBWjtBQUNBLFdBQU9WLFNBQVMsSUFBaEI7QUFDRCxHOztPQUVESyxPLEdBQVUsVUFBQ1AsR0FBRCxFQUFNRSxLQUFOLEVBQWdCO0FBQ3hCLFFBQU1VLFdBQVdHLEtBQUtFLFNBQUwsQ0FBZWYsS0FBZixDQUFqQjtBQUNBVyxXQUFPQyxZQUFQLENBQW9CUCxPQUFwQixDQUE0QlAsR0FBNUIsRUFBaUNZLFFBQWpDO0FBQ0QsRzs7O2tCQTFCa0JiLEs7QUFvQ2QsU0FBU0QsVUFBVCxDQUFvQlcsTUFBcEIsRUFBNEI7QUFDakNTLFNBQU9DLElBQVAsQ0FBWVYsTUFBWixFQUFvQlcsT0FBcEIsQ0FBNEIsVUFBU3BCLEdBQVQsRUFBYztBQUN4QyxXQUFPUyxPQUFPVCxHQUFQLENBQVA7QUFDRCxHQUZEO0FBR0EsU0FBT1MsTUFBUDtBQUNEIiwiZmlsZSI6IjguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVib3VuY2UgZnJvbSBcImxvZGFzaC9kZWJvdW5jZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdG9yZSB7XG4gIHNhdmUgPSBkZWJvdW5jZSh2YWx1ZSA9PiB7XG4gICAgdGhpcy5zZXRJdGVtKHRoaXMua2V5LCB2YWx1ZSk7XG4gIH0sIDApO1xuXG4gIGhhbmRsZXIgPSB7XG4gICAgZ2V0OiAodGFyZ2V0LCBwcm9wZXJ0eSkgPT4ge1xuICAgICAgcmV0dXJuIHRhcmdldFtwcm9wZXJ0eV07XG4gICAgfSxcbiAgICBzZXQ6ICh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSkgPT4ge1xuICAgICAgdGFyZ2V0W3Byb3BlcnR5XSA9IHZhbHVlO1xuXG4gICAgICB0aGlzLnNhdmUodGFyZ2V0KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfTtcblxuICBnZXRJdGVtID0ga2V5ID0+IHtcbiAgICBjb25zdCB2YWx1ZVJhdyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgIHZhciB2YWx1ZSA9IEpTT04ucGFyc2UodmFsdWVSYXcpO1xuICAgIHJldHVybiB2YWx1ZSB8fCBudWxsO1xuICB9O1xuXG4gIHNldEl0ZW0gPSAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgIGNvbnN0IHZhbHVlUmF3ID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlUmF3KTtcbiAgfTtcblxuICBjb25zdHJ1Y3RvcihrZXksIGluaXRpYWxWYWx1ZSkge1xuICAgIHRoaXMua2V5ID0ga2V5O1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXRJdGVtKHRoaXMua2V5KSB8fCBpbml0aWFsVmFsdWU7XG4gICAgcmV0dXJuIG5ldyBQcm94eSh2YWx1ZSwgdGhpcy5oYW5kbGVyKTtcbiAgfVxufVxuXG4vL3RvZG86IG1ha2UgYXMgYSBwYXJ0IG9mIHN0b3JlXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJTdG9yZSh0YXJnZXQpIHtcbiAgT2JqZWN0LmtleXModGFyZ2V0KS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGRlbGV0ZSB0YXJnZXRba2V5XTtcbiAgfSk7XG4gIHJldHVybiB0YXJnZXQ7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///8\n')}},[[7,1,0]]]);